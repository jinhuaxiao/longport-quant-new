# 内置监控列表使用指南

## 概述

`advanced_technical_trading.py` 现在支持两种监控列表模式：

1. **配置文件模式**（默认）：从 `configs/watchlist.yml` 加载
2. **内置列表模式**：使用代码中定义的50+个港股和8个美股

## 快速开始

### 使用配置文件（默认）

```bash
python3 scripts/advanced_technical_trading.py
```

### 使用内置列表

```bash
python3 scripts/advanced_technical_trading.py --builtin
# 或
python3 scripts/advanced_technical_trading.py -b
```

## 内置监控列表

### 📈 港股 (44个标的)

#### 科技股 (10个)
- **9988.HK** - 阿里巴巴
- **3690.HK** - 美团
- **0700.HK** - 腾讯
- **1810.HK** - 小米
- **9618.HK** - 京东
- **1024.HK** - 快手
- **0981.HK** - 中芯国际
- **9660.HK** - 地平线机器人
- **2382.HK** - 舜宇光学科技

#### 金融股 (9个)
- **0005.HK** - 汇丰控股
- **0388.HK** - 港交所
- **0939.HK** - 建设银行
- **1398.HK** - 工商银行
- **3988.HK** - 中国银行
- **2318.HK** - 中国平安
- **3968.HK** - 招商银行

#### 能源股 (3个)
- **0883.HK** - 中海油
- **0386.HK** - 中国石化
- **0857.HK** - 中国石油

#### 消费股 (4个)
- **9992.HK** - 泡泡玛特
- **1929.HK** - 周大福
- **2319.HK** - 蒙牛乳业
- **2020.HK** - 安踏体育

#### 汽车股 (2个)
- **1211.HK** - 比亚迪
- **0175.HK** - 吉利汽车

#### 工业股 (2个)
- **0558.HK** - 力劲科技
- **0669.HK** - 创科实业

#### 博彩股 (2个)
- **1928.HK** - 金沙中国
- **0027.HK** - 银河娱乐

#### 地产股 (2个)
- **1109.HK** - 华润置地
- **0688.HK** - 中国海外发展

#### 公用事业 (2个)
- **0836.HK** - 华润电力
- **2688.HK** - 新奥能源

#### 综合类 (1个)
- **0001.HK** - 长和

#### 热门ETF (10个)
- **2800.HK** - 盈富基金（恒生指数ETF）
- **2822.HK** - 南方A50
- **2828.HK** - 恒生H股ETF
- **3188.HK** - 华夏沪深300
- **9919.HK** - 南方恒指
- **3110.HK** - 东汇科技ETF
- **2801.HK** - iShares核心MSCI
- **2827.HK** - iShares MSCI中国
- **9067.HK** - 恒生科技30ETF
- **2819.HK** - 安硕A50

### 📈 美股 (8个标的)

#### 科技股 (7个)
- **AAPL.US** - 苹果
- **MSFT.US** - 微软
- **GOOGL.US** - 谷歌
- **AMZN.US** - 亚马逊
- **NVDA.US** - 英伟达
- **META.US** - Meta
- **AMD.US** - AMD

#### 汽车股 (1个)
- **TSLA.US** - 特斯拉

### 📈 A股 (1个标的)

- **300750.SZ** - 宁德时代（新能源）

**总计**: 52个监控标的

## 运行示例

### 启动时输出

```
======================================================================
启动高级技术指标自动交易系统
策略组合: RSI(14) + BB(20,2.0σ) + MACD + Volume + ATR
======================================================================
✅ 使用内置监控列表
   港股: 44 个标的
   美股: 8 个标的
   总计: 52 个标的

📈 账户状态:
  💰 HKD 余额: $-1,132,837.53
  📦 持仓数: 6/5
```

### 港股时间运行

```
======================================================================
第 1 轮扫描 - 10:30:00
======================================================================
📍 活跃市场: HK | 监控标的: 44个
📊 获取到 44 个标的的实时行情

分析标的:
  ✓ 9988.HK (阿里巴巴)
  ✓ 3690.HK (美团)
  ✓ 0700.HK (腾讯)
  ...
```

### 美股时间运行

```
======================================================================
第 1 轮扫描 - 22:30:00
======================================================================
📍 活跃市场: US | 监控标的: 8个
📊 获取到 8 个标的的实时行情

分析标的:
  ✓ AAPL.US (苹果)
  ✓ MSFT.US (微软)
  ✓ NVDA.US (英伟达)
  ...
```

## 自定义监控列表

### 修改内置列表

编辑 `scripts/advanced_technical_trading.py` 中的 `__init__` 方法：

```python
# 港股监控列表
self.hk_watchlist = {
    "9988.HK": {"name": "阿里巴巴", "sector": "科技"},
    "3690.HK": {"name": "美团", "sector": "科技"},
    # 添加你的标的...
}

# 美股监控列表
self.us_watchlist = {
    "AAPL.US": {"name": "苹果", "sector": "科技"},
    # 添加你的标的...
}
```

### 标的格式

每个标的包含以下信息：

```python
"标的代码": {
    "name": "公司名称",    # 中文或英文名称
    "sector": "行业分类"   # 如: 科技、金融、消费等
}
```

**代码格式规范**:
- 港股：`XXXX.HK` (如 `0700.HK` - 注意补齐4位)
- 美股：`XXXX.US` (如 `AAPL.US`)
- A股：`XXXXXX.SH` 或 `XXXXXX.SZ`

**重要**：港股代码需要补齐4位数字：
- ✅ 正确：`0700.HK`, `0005.HK`, `0001.HK`
- ❌ 错误：`700.HK`, `5.HK`, `1.HK`

## 与配置文件模式对比

| 特性 | 配置文件模式 | 内置列表模式 |
|------|-------------|-------------|
| **启动方式** | 默认 | `--builtin` |
| **配置位置** | `configs/watchlist.yml` | 代码中 |
| **修改方式** | 编辑YAML文件 | 编辑Python代码 |
| **灵活性** | 高（无需重启） | 低（需修改代码） |
| **标的数量** | 用户自定义 | 52个（44港股+8美股） |
| **行业信息** | 可选 | 内置 |
| **适用场景** | 快速调整监控列表 | 固定的监控池 |

## 优势对比

### 内置列表模式的优势

✅ **覆盖全面** - 包含主流港股和美股
✅ **分类清晰** - 按行业分类，便于管理
✅ **开箱即用** - 无需配置文件
✅ **信息丰富** - 包含名称和行业信息
✅ **ETF支持** - 包含10个热门ETF

### 配置文件模式的优势

✅ **动态调整** - 修改后立即生效（重启后）
✅ **简单易用** - YAML格式易读易写
✅ **无需编程** - 非技术用户友好
✅ **版本控制** - 配置文件可独立管理

## 测试工具

### 测试内置列表

```bash
python3 scripts/test_builtin_watchlist.py
```

输出：
```
======================================================================
测试内置监控列表
======================================================================

港股监控列表 (44 个):
  9988.HK      - 阿里巴巴            (科技)
  3690.HK      - 美团              (科技)
  0700.HK      - 腾讯              (科技)
  ...

美股监控列表 (8 个):
  AAPL.US      - 苹果              (科技)
  MSFT.US      - 微软              (科技)
  ...

总计监控标的: 52 个

港股时间过滤后: 44 个
美股时间过滤后: 8 个

✅ 测试完成
```

## 性能考虑

### API调用频率

**港股时间** (4.5小时 × 60次/小时):
- 配置模式: 5个标的 × 270次 = 1,350次调用
- 内置模式: 44个标的 × 270次 = **11,880次调用**

**美股时间** (6.5小时 × 60次/小时):
- 配置模式: 2个标的 × 390次 = 780次调用
- 内置模式: 8个标的 × 390次 = **3,120次调用**

**建议**：
- 如果API配额有限，使用配置文件模式
- 如果需要全面监控，使用内置列表模式
- 可以修改内置列表，删除不需要的标的

## 最佳实践

### 1. 精选高质量标的

不要监控所有标的，选择：
- 流动性好的大盘股
- 交易活跃的科技股
- 稳定的ETF

### 2. 行业分散

建议监控列表包含：
- 科技股 30%
- 金融股 20%
- 消费股 15%
- 其他行业 35%

### 3. 定期review

每周检查：
- 哪些标的从未触发信号
- 哪些标的频繁触发但不盈利
- 是否有新的热门标的

### 4. 组合策略

- 主力标的：5-10个重点监控
- 备选标的：20-30个机会监控
- ETF标的：3-5个分散风险

## 常见问题

### Q: 如何只监控科技股？

修改代码，只保留 `sector == "科技"` 的标的：

```python
self.hk_watchlist = {
    "9988.HK": {"name": "阿里巴巴", "sector": "科技"},
    "3690.HK": {"name": "美团", "sector": "科技"},
    "0700.HK": {"name": "腾讯", "sector": "科技"},
    # 其他科技股...
}
```

### Q: 可以同时使用两种模式吗？

不可以。系统在启动时选择一种模式：
- 默认：配置文件模式
- `--builtin`：内置列表模式

### Q: 如何添加新的港股标的？

在 `hk_watchlist` 字典中添加：

```python
"2399.HK": {"name": "虎牙直播", "sector": "科技"},
```

注意代码格式（4位数字 + .HK）。

### Q: 内置列表会自动更新吗？

不会。内置列表是硬编码的，需要手动更新。

建议每月review一次，添加新上市的热门股票。

## 扩展建议

### 未来可能的增强

1. **动态标的池** - 根据市值/成交量自动筛选
2. **行业轮动** - 根据行业表现动态调整
3. **热度追踪** - 监控社交媒体热门标的
4. **基本面过滤** - 结合PE、PB等指标筛选

## 相关文档

- [市场感知功能](MARKET_AWARE_TRADING.md) - 智能市场过滤
- [高级策略指南](ADVANCED_STRATEGY_GUIDE.md) - 策略详解
- [Slack通知配置](SLACK_NOTIFICATION.md) - 实时通知

## 总结

内置监控列表功能提供了：

✅ **即插即用** - 52个精选标的
✅ **全面覆盖** - 港股+美股+ETF
✅ **智能过滤** - 市场感知自动筛选
✅ **灵活切换** - 一个参数即可切换模式

**推荐使用场景**：
- 新手用户：使用内置列表快速开始
- 进阶用户：自定义内置列表或使用配置文件
- 专业用户：结合两种模式，测试不同策略

---

**版本**: v2.1
**更新日期**: 2025-09-30
**状态**: ✅ 已测试通过