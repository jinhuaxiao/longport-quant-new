# 长桥量化交易系统 - 自动化执行代理

## 继续执行指令

当用户输入"继续"时，执行以下流程：

1. **读取TODO.md文件**
   - 加载当前任务列表
   - 识别未完成任务
   - 按优先级和依赖关系排序

2. **选择下一个任务**
   - 优先选择"进行中"的任务
   - 如果没有进行中的任务，选择下一个未开始的任务
   - 考虑任务依赖关系

3. **执行任务**
   - 根据任务类型执行相应操作：
     - 数据库相关：创建迁移脚本、执行SQL
     - 代码实现：创建/修改Python文件
     - 配置相关：更新配置文件
     - 测试相关：编写和运行测试

4. **更新TODO状态**
   - 标记完成的任务为 [x]
   - 更新进度统计
   - 记录完成时间和备注

5. **提供执行报告**
   - 显示完成的任务
   - 显示下一步计划
   - 如有错误，提供解决方案

## 任务执行模板

### 数据库表创建任务
```python
# 1. 创建迁移脚本
# 2. 在models.py中添加模型
# 3. 执行迁移
# 4. 验证表结构
```

### 服务实现任务
```python
# 1. 创建服务文件
# 2. 实现核心逻辑
# 3. 添加错误处理
# 4. 编写单元测试
# 5. 集成到主系统
```

### 策略实现任务
```python
# 1. 创建策略类
# 2. 实现信号生成逻辑
# 3. 添加参数配置
# 4. 实现回测接口
# 5. 测试策略效果
```

## 快捷命令

- `继续` - 执行下一个任务
- `查看进度` - 显示当前进度统计
- `查看当前任务` - 显示正在进行的任务
- `跳过任务` - 跳过当前任务，标记为blocked
- `完成任务 [任务名]` - 手动标记任务完成
- `添加任务 [任务描述]` - 添加新任务到列表
- `优先执行 [任务名]` - 调整任务优先级

## 执行规则

1. **依赖检查**：执行前检查任务依赖是否满足
2. **环境验证**：确保必要的环境和配置就绪
3. **错误处理**：遇到错误时记录并提供解决方案
4. **进度保存**：每完成一个任务自动保存进度
5. **日志记录**：详细记录执行过程和结果

## 任务类型定义

### Type A: 数据库任务
- 创建表结构
- 添加索引
- 数据迁移
- 分区管理

### Type B: 代码实现
- 创建Python模块
- 实现业务逻辑
- 集成第三方API
- 优化算法

### Type C: 配置任务
- 环境变量设置
- 配置文件创建
- 参数调优
- 权限设置

### Type D: 测试任务
- 单元测试
- 集成测试
- 性能测试
- 回测验证

## 自动化执行示例

```python
class TaskExecutor:
    def execute_next_task(self):
        """执行下一个任务的主逻辑"""
        # 1. 读取TODO列表
        tasks = self.read_todo_file()

        # 2. 找到下一个任务
        next_task = self.find_next_task(tasks)

        # 3. 执行任务
        if next_task:
            result = self.execute_task(next_task)

            # 4. 更新状态
            self.update_task_status(next_task, result)

            # 5. 生成报告
            self.generate_report(next_task, result)

        return next_task
```

## 进度跟踪

任务完成后自动更新以下指标：
- Phase进度百分比
- 总体完成率
- 预计完成时间
- 阻塞任务列表
- 风险提醒