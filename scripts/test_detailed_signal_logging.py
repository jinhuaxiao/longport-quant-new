#!/usr/bin/env python3
"""测试详细的信号生成日志输出"""

import asyncio
from loguru import logger


async def test_signal_logging():
    """测试信号生成的详细日志"""

    print("""
╔═══════════════════════════════════════════════════════════════════════╗
║                   测试详细信号生成日志                                  ║
╠═══════════════════════════════════════════════════════════════════════╣
║                                                                       ║
║  功能说明:                                                            ║
║    显示每个股票从实时行情到信号决策的完整过程                            ║
║                                                                       ║
║  日志内容:                                                            ║
║    1. 实时行情: 价格、成交量                                          ║
║    2. 技术指标: RSI、布林带、MACD、成交量、趋势                        ║
║    3. 信号评分: 各项指标得分明细                                       ║
║    4. 最终决策: 是否生成信号及原因                                     ║
║                                                                       ║
║  测试股票:                                                            ║
║    • 9992.HK (泡泡玛特)                                              ║
║    • 1024.HK (快手)                                                  ║
║    • 1347.HK (华虹半导体)                                            ║
║    • 9988.HK (阿里巴巴)                                              ║
║    • 其他所有监控列表中的股票                                          ║
║                                                                       ║
╚═══════════════════════════════════════════════════════════════════════╝
    """)

    logger.info("\n启动交易系统，查看详细的信号分析过程...")
    logger.info("运行命令: python scripts/advanced_technical_trading.py --builtin")
    logger.info("\n现在您将看到每个股票的完整分析过程:")
    logger.info("包括为什么某些股票没有生成交易信号\n")

    # 展示预期的输出格式
    logger.info("=" * 70)
    logger.info("预期输出格式示例")
    logger.info("=" * 70)

    example_output = """
📊 分析 9992.HK (泡泡玛特)
  实时行情: 价格=$256.00, 成交量=4,672,001

  技术指标:
    RSI: 65.3 (偏高)
    布林带: 85%位置
    MACD: 2.456 vs 信号线1.823 (多头)
    成交量: 0.8x (正常)
    趋势: 上升趋势 (SMA20=$245.30, SMA50=$238.50)

  信号评分:
    RSI得分: 0/30 (偏高(65.3))
    布林带得分: 0/25 (位置85%)
    MACD得分: 15/20 (多头)
    成交量得分: 0/15 (正常或缩量(0.8x))
    趋势得分: 10/10 (上升趋势)
    总分: 25/100

  ❌ 决策: 不生成信号 (得分25 < 30最低要求)
"""

    logger.info(example_output)

    logger.info("=" * 70)
    logger.info("运行实际系统查看所有股票的分析结果")
    logger.info("=" * 70)


if __name__ == "__main__":
    asyncio.run(test_signal_logging())